<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, viewport-fit=cover"
  />
  <title>Tools — VISIVA® Platform</title>

<!-- Three.js (module build) -->
<script type="module">
import * as THREE from 'https://unpkg.com/three@0.160.0/build/three.module.js';

const canvas = document.getElementById('xr-canvas');
const supportEl = document.getElementById('xr-support');

const btnVREnter = document.getElementById('xr-vr-enter');
const btnAREnter = document.getElementById('xr-ar-enter');
const btnExit    = document.getElementById('xr-exit');

let xrSession = null;

// ------------------------------
// THREE.JS SETUP
// ------------------------------
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x0a0a0a);

const camera = new THREE.PerspectiveCamera(60, canvas.clientWidth / canvas.clientHeight, 0.01, 50);

const renderer = new THREE.WebGLRenderer({
  canvas,
  antialias: true,
  alpha: true
});
renderer.setSize(canvas.clientWidth, canvas.clientHeight);
renderer.setPixelRatio(window.devicePixelRatio);
renderer.xr.enabled = true;

// Lighting
const hemi = new THREE.HemisphereLight(0xffffff, 0x111111, 1.2);
scene.add(hemi);

const dir = new THREE.DirectionalLight(0xd4af37, 1);
dir.position.set(2, 4, 2);
scene.add(dir);

// Cinematic object (placeholder for brand assets)
const geometry = new THREE.TorusGeometry(0.35, 0.08, 32, 100);
const material = new THREE.MeshStandardMaterial({
  color: 0xd4af37,
  metalness: 0.8,
  roughness: 0.2
});
const ring = new THREE.Mesh(geometry, material);
ring.position.set(0, 1.5, -1.5);
scene.add(ring);

// Animation
renderer.setAnimationLoop(() => {
  ring.rotation.x += 0.004;
  ring.rotation.y += 0.006;
  renderer.render(scene, camera);
});

// ------------------------------
// WEBXR SUPPORT CHECKS
// ------------------------------
async function checkXR() {
  if (!navigator.xr) {
    supportEl.textContent = 'WebXR not supported in this browser.';
    return;
  }

  const vrSupported = await navigator.xr.isSessionSupported('immersive-vr');
  const arSupported = await navigator.xr.isSessionSupported('immersive-ar');

  if (vrSupported) btnVREnter.disabled = false;
  if (arSupported) btnAREnter.disabled = false;

  supportEl.textContent =
    vrSupported || arSupported
      ? 'XR supported — choose VR or AR.'
      : 'XR not supported on this device.';
}

checkXR();

// ------------------------------
// SESSION HANDLERS
// ------------------------------
async function startXR(mode) {
  const session = await navigator.xr.requestSession(mode, {
    requiredFeatures: mode === 'immersive-ar'
      ? ['local-floor']
      : ['local-floor']
  });

  renderer.xr.setSession(session);
  xrSession = session;

  btnExit.disabled = false;
  btnVREnter.disabled = true;
  btnAREnter.disabled = true;

  session.addEventListener('end', () => {
    xrSession = null;
    btnExit.disabled = true;
    btnVREnter.disabled = false;
    btnAREnter.disabled = false;
  });
}

btnVREnter.addEventListener('click', () => startXR('immersive-vr'));
btnAREnter.addEventListener('click', () => startXR('immersive-ar'));
btnExit.addEventListener('click', () => xrSession && xrSession.end());

// ------------------------------
// RESIZE
// ------------------------------
window.addEventListener('resize', () => {
  camera.aspect = canvas.clientWidth / canvas.clientHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(canvas.clientWidth, canvas.clientHeight);
});
</script>
  
  <!-- Styles -->
  ../assets/css/style.css
  ../assets/css/components.css
  ../assets/css/platform.css

  <style>
    /* ===== Page-local polish for Tools + WebXR preview ===== */

    .tools-hero-bg {
      position: absolute; inset: 0;
      background:
        radial-gradient(60% 50% at 50% 40%, rgba(212,175,55,0.16), rgba(0,0,0,0) 60%),
        linear-gradient(180deg, #0A0A0A, #000);
      opacity: .65;
    }

    /* XR section */
    .xr-wrap {
      max-width: 1100px;
      margin: 0 auto;
    }
    .xr-controls {
      display: flex; gap: var(--space-2);
      margin-bottom: var(--space-3);
      flex-wrap: wrap;
    }
  
  <div class="xr-controls" role="group" aria-label="WebXR controls">
  <button class="xr-btn" id="xr-vr-enter" disabled>Enter VR</button>
  <button class="xr-btn" id="xr-ar-enter" disabled>Enter AR</button>
  <button class="xr-btn" id="xr-exit" disabled>Exit XR</button>
  <span id="xr-support" class="body" style="opacity:.8;"></span>
</div>
    
    .xr-stage {
      position: relative;
      height: 420px;
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: var(--radius-md);
      overflow: hidden;
      background:
        radial-gradient(60% 60% at 50% 50%, rgba(212,175,55,0.14), rgba(0,0,0,0) 60%),
        radial-gradient(120% 100% at 50% 110%, rgba(212,175,55,0.06), rgba(0,0,0,0) 30%),
        linear-gradient(180deg, #0A0A0A, #000);
    }
    canvas#xr-canvas { width: 100%; height: 100%; display: block; }

    .xr-badge {
      position: absolute; top: 14px; left: 14px;
      background: rgba(0,0,0,0.55);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: var(--radius-sm);
      padding: 6px 10px; font-size: 12px;
      color: var(--text-light); letter-spacing: .06em;
      z-index: 2;
    }
    .xr-hint {
      position: absolute; bottom: 14px; right: 14px;
      background: rgba(0,0,0,0.55);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: var(--radius-sm);
      padding: 6px 10px; font-size: 12px;
      color: var(--text-soft); z-index: 2;
    }

    /* Decorative “stage” elements shown in non-XR / inline preview */
    .xr-deco {
      position: absolute; inset: 0; display: grid; place-items: center;
      pointer-events: none;
    }
    .xr-ring {
      width: 220px; height: 220px; border-radius: 50%;
      border: 3px solid rgba(212,175,55,0.75);
      box-shadow: 0 0 28px rgba(212,175,55,0.55);
      animation: orbit 12s linear infinite;
    }
    .xr-grid {
      position: absolute; left: -10%; right: -10%; bottom: -20px; height: 55%;
      background:
        linear-gradient(rgba(212,175,55,0.18), rgba(212,175,55,0.04) 40%, rgba(0,0,0,0)),
        repeating-linear-gradient(to right, rgba(255,255,255,0.08) 0 1px, rgba(0,0,0,0) 1px 40px),
        repeating-linear-gradient(to top, rgba(255,255,255,0.08) 0 1px, rgba(0,0,0,0) 1px 40px);
      transform: perspective(600px) rotateX(72deg);
      filter: drop-shadow(0 0 12px rgba(212,175,55,0.25));
    }
    @keyframes orbit {
      from { transform: rotate(0deg) perspective(700px) rotateX(18deg) rotateY(0deg); }
      to   { transform: rotate(360deg) perspective(700px) rotateX(18deg) rotateY(360deg); }
    }

    @media (max-width: 768px) {
      .xr-stage { height: 340px; }
      .xr-ring { width: 180px; height: 180px; }
    }
  </style>
</head>

  <script>
  // Client-side partial include (pure HTML/JS)
  async function injectPartial(selector, url) {
    const el = document.querySelector(selector);
    if (!el) return;
    const res = await fetch(url);
    el.outerHTML = await res.text();
  }
  // placeholders in page:
  // <div id="partial-header"></div>
  // <div id="partial-footer"></div>
  (async () => {
    const root = location.pathname.includes('/visiva-v2/') ? '/visiva-v2' : '';
    await injectPartial('#partial-header', `${root}/partials/header.html`);
    await injectPartial('#partial-footer', `${root}/partials/footer.html`);
  })();
</script>
  
<body>

  <script>
  // Client-side partial include (pure HTML/JS)
  async function injectPartial(selector, url) {
    const el = document.querySelector(selector);
    if (!el) return;
    const res = await fetch(url);
    el.outerHTML = await res.text();
  }
  // placeholders in page:
  // <div id="partial-header"></div>
  // <div id="partial-footer"></div>
  (async () => {
    const root = location.pathname.includes('/visiva-v2/') ? '/visiva-v2' : '';
    await injectPartial('#partial-header', `${root}/partials/header.html`);
    await injectPartial('#partial-footer', `${root}/partials/footer.html`);
  })();
</script>

  <div id="partial-header"></div>
<!-- page content -->
<div id="partial-footer"></div>
  
<!-- ======================================================
GLOBAL NAVIGATION
====================================================== -->
<header class="visiva-header">
  <div class="nav-wrapper">
    ../<a href="index.html">index.html</a>VISIVA®</a>

    <nav class="nav-links">
      <div class="nav-item">
        ../overview.htmlPlatform</a>
        <div class="mega-menu">
          ../overview.htmlOverview</a>
          ../philosophy.htmlPhilosophy</a>
          ../process.htmlDesign Process</a>
          ../bie.htmlIntelligence Engine</a>
          ../dna.htmlBrand DNA Generator</a>
          ../guardian-ai.htmlBrand Guardian AI</a>
          ../ar-vr.htmlAR / VR Experience</a>
          ../universe.htmlBrand Universe</a>
          ../health-check.htmlBrand Health Check</a>
          ../licensing.htmlLicensing Dashboard</a>
          ../sustainability.htmlSustainability & Accessibility</a>
          <./vault.htmlBrand Vault</a>
          ../timeline.htmlEvolution Timeline</a>
        </div>
      </div>

      ./Tools</a>
      ../brand-kits/Brand Kits</a>
      ../universe.htmlBrand Universe</a>
      ../academy/Academy</a>
      <a/marketplace/Marketplace</a>
      https://visiva.co.za/experience-appExperience App</a>
      ../portal/login.htmlLogin</a>
    </nav>
  </div>
</header>

<!-- ======================================================
HERO — TOOLS
====================================================== -->
<section class="hero-section">
  <div class="tools-hero-bg"></div>
  <div class="hero-content">
    <h1 class="hero-title fade-up">VISIVA® Tools</h1>
    <p class="hero-subtitle fade-up delay-1">
      Intelligent, cinematic utilities that turn brand systems into daily practice —
      from design precision to governance and insight.
    </p>
  </div>
</section>

<!-- ======================================================
SECTION — TOOLS GRID
====================================================== -->
<section class="section">
  <h2 class="section-title accent-line fade-up">Explore the Suite</h2>
  <p class="section-desc fade-up delay-1">
    Each tool is crafted to be visually elegant, operationally precise, and aligned to your Brand DNA.
  </p>

  <div class="tool-grid fade-up delay-2">
    <a class="tool-card" href="logo-optimiser.html" aria-label="Open AI Logo Optimiser  <h3>AI Logo Optimiser</h3>
      <p>Clarity at size, contrast readiness, digital fit — with fast reports.</p>
    </a>

    colour-generator.html
      ../assets/images/tools/colour-generator-1x1-clean.jpg
      <h3>Colour Generator</h3>
      <p>Mood‑based palette creation using cinematic harmonics.</p>
    </a>

    harmoniser.html
      ../assets/images/tools/harmoniser-1x1-clean.jpg
      <h3>Smart Colour Harmoniser</h3>
      <p>Adaptive complements that preserve brand integrity.</p>
    </a>

    copy-tone.html
      ../assets/images/tools/copy-tone-1x1-clean.jpg
      <h3>AI Copy Tone Assistant</h3>
      <p>Brand‑aligned tone bands, terminology and clarity checks.</p>
    </a>

    brand-dna.html
      ../assets/images/tools/brand-dna-1x1-clean.jpg
      <h3>Brand DNA</h3>
      <p>Define purpose, archetype, personality, tone — codified.</p>
    </a>

    universe-map.html
      ../assets/images/tools/universe-map-1x1-clean.jpg
      <h3>Brand Universe Map</h3>
      <p>Visualise structure, relationships and dependencies.</p>
    </a>

    viewer-3d.html
      ../assets/images/tools/viewer-3d-1x1-clean.jpg
      <h3>3D Logo Viewer</h3>
      <p>Inspect lighting, material and motion rules in real‑time.</p>
    </a>

    ar-vr.html
      ../assets/images/tools/ar-vr-1x1-clean.jpg
      <h3>AR / VR Experience</h3>
      <p>Spatial brand worlds for context, scale and cinematic pitch.</p>
    </a>

    bie-dashboard.html
      ../assets/images/tools/bie-dashboard-1x1-clean.jpg
      <h3>BIE Dashboard</h3>
      <p>Intelligence, scoring and brand health at a glance.</p>
    </a>
  </div>
</section>

<!-- ======================================================
SECTION — WEBXR (VR) PREVIEW
====================================================== -->
<section class="section dark-section">
  <h2 class="section-title accent-line fade-up">Spatial Preview (WebXR)</h2>
  <p class="section-desc fade-up delay-1">
    Launch a lightweight **VR session** to preview a cinematic stage. Full scenes and assets are available
    in the Experience App. WebXR requires **HTTPS** and a compatible browser/headset.
  </p>

  <div class="xr-wrap fade-up delay-2">
    <div class="xr-controls" role="group" aria-label="WebXR controls">
      <button class="xr-btn" id="xr-enter" disabled>Enter VR</button>
      <button class="xr-btn" id="xr-exit" disabled>Exit VR</button>
      <span id="xr-support" class="body" style="opacity:.8;"></span>
    </div>

    <div class="xr-stage">
      <div class="xr-badge" id="xr-badge">Inline Preview</div>
      <canvas id="xr-canvas" aria-label="WebXR preview canvas"></canvas>

      <!-- Decorative non‑XR inline scene -->
      <div class="xr-deco" id="xr-deco">
        <div class="xr-ring" aria-hidden="true"></div>
        <div class="xr-grid" aria-hidden="true"></div>
      </div>

      <div class="xr-hint">Tip: Use a VR‑capable browser and headset to enter immersive mode.</div>
    </div>
  </div>
</section>

<!-- ======================================================
SECTION — CTA
====================================================== -->
<section class="section">
  <h2 class="section-title accent-line fade-up">Work Inside the Experience</h2>
  <p class="section-desc fade-up delay-1">
    Access the full suite of tools, dashboards, and collaborative rooms in the VISIVA® Experience App.
  </p>
  <div class="three-grid fade-up delay-2">
    <a class="tool-cardl
      <h3>Learn the Intelligence Model</h3>
      <p>Understand how decisions are guided with BIE.</p>
    </a>
    https://visiva.co.za/experience-app
      <h3>Launch Experience App</h3>
      <p>Use tools, manage assets, and explore immersive scenes.</p>
    </a>
    ../universe.html
      <h3>Explore the Brand Universe</h3>
      <p>See how everything connects in one system.</p>
    </a>
  </div>
</section>

<!-- ======================================================
FOOTER
====================================================== -->
<footer class="footer">
  <div class="footer-grid">
    <p>VISIVA® Brand Design Platform</p>
    <div class="footer-links">
      https://instagram.com/visivaInstagram</a>
      https://linkedin.com/company/visivaLinkedIn</a>
      https://visiva.siteWebsite</a>
    </div>
    <p class="footer-copy">© 2026 VISIVA®. All Rights Reserved.</p>
  </div>
</footer>

<!-- ===========================
     MOBILE BOTTOM BAR
=========================== -->
<nav class="mobile-bottom-bar">
  ../overview.html
    <span>◉</span>
    Platform
  </a>
  ../timeline.html
    <span>⟡</span>
    Timeline
  </a>
  ./
    <span>◼</span>
    Tools
  </a>
  https://visiva.co.za/experience-app
    <span>▶</span>
    App
  </a>
</nav>

<!-- Scripts -->
../assets/js/app.js</script>
../assets/js/ui.js</script>
../assets/js/cinematic.js</script>

<script>
/* ==========================================================
   Minimal WebXR VR Preview — pure WebXR Device API
   - Secure context (HTTPS) required (except localhost)
   - Headset & VR-capable browser needed for immersive-vr
   - Graceful fallback when unsupported
   ========================================================== */

(function () {
  const supportEl = document.getElementById('xr-support');
  const btnEnter = document.getElementById('xr-enter');
  const btnExit  = document.getElementById('xr-exit');
  const badge    = document.getElementById('xr-badge');
  const deco     = document.getElementById('xr-deco');
  const canvas   = document.getElementById('xr-canvas');

  let xrSession = null;
  let xrRefSpace = null;
  let gl = null;

  const isSecure =
    (location.protocol === 'https:') ||
    (location.hostname === 'localhost' || location.hostname === '127.0.0.1');

  if (!isSecure) {
    supportEl.textContent = 'WebXR requires HTTPS (or localhost).';
    return;
  }

  if (!navigator.xr) {
    supportEl.textContent = 'WebXR not available in this browser.';
    return;
  }

  navigator.xr.isSessionSupported('immersive-vr').then((supported) => {
    if (supported) {
      supportEl.textContent = 'VR supported — connect a headset to enter.';
      btnEnter.disabled = false;
    } else {
      supportEl.textContent = 'VR session not supported on this device.';
    }
  }).catch(() => {
    supportEl.textContent = 'Unable to check WebXR support.';
  });

  async function onSessionEnded() {
    xrSession = null;
    btnEnter.disabled = false;
    btnExit.disabled = true;
    badge.textContent = 'Inline Preview';
    deco.style.display = '';
  }

  async function onXRFrame(time, frame) {
    const session = frame.session;
    const pose = frame.getViewerPose(xrRefSpace);
    const layer = session.renderState.baseLayer;

    gl.bindFramebuffer(gl.FRAMEBUFFER, layer.framebuffer);
    // Simple animated clear color to indicate a live XR frame.
    const t = (time % 2000) / 2000;
    const r = 0.1 + 0.2 * Math.sin(t * Math.PI * 2);
    const g = 0.1 + 0.2 * Math.cos(t * Math.PI * 2);
    const b = 0.12;
    gl.clearColor(r, g, b, 1.0);
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    // (Optional) You can draw geometry per view using pose.views here.

    session.requestAnimationFrame(onXRFrame);
  }

  async function beginXR() {
    try {
      btnEnter.disabled = true;
      const session = await navigator.xr.requestSession('immersive-vr', {
        requiredFeatures: ['local-floor']
      });
      xrSession = session;

      // GL setup
      gl = canvas.getContext('webgl', { alpha: false, antialias: true });
      await gl.makeXRCompatible();

      session.updateRenderState({ baseLayer: new XRWebGLLayer(session, gl) });

      xrRefSpace = await session.requestReferenceSpace('local-floor');

      session.addEventListener('end', onSessionEnded);

      btnExit.disabled = false;
      badge.textContent = 'Immersive VR';
      // Hide decorative inline scene when in XR
      deco.style.display = 'none';

      session.requestAnimationFrame(onXRFrame);
    } catch (e) {
      console.warn('Failed to start XR session:', e);
      btnEnter.disabled = false;
      supportEl.textContent = 'Could not start VR — check browser/headset permissions.';
    }
  }

  async function endXR() {
    if (xrSession) {
      await xrSession.end();
    }
  }

  btnEnter.addEventListener('click', beginXR);
  btnExit.addEventListener('click', endXR);
})();
</script>

</body>
</html>
